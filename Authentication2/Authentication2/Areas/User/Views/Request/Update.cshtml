@model CreateRequestViewModel

<h1>Update Request</h1>

<form method="post" action='@Url.Action("Update", "Request")'>
    @Html.HiddenFor(m => m.Id)
    @Html.HiddenFor(m => m.UserId)
    @Html.HiddenFor(m => m.DriverId)
    @Html.HiddenFor(m => m.Status)
    <table>
        <tr>
            <th><h3>Pickup</h3></th>
            <td>
                @Html.DropDownList("AddressList", null, new { @id = "pickUpAddressList", onchange = "FillFields(1)" })
            </td>
        </tr>
        <tr>
            <td>Street Number</td>
            <td colspan="2">Street Name</td>
        </tr>
        <tr>
            <td>
                <input asp-for="PickupStreetNumber" class="form-control" />
                <span asp-validation-for="PickupStreetNumber" class="text-danger"></span>
            </td>

            <td colspan="2">
                <input asp-for="PickupStreetName" class="form-control" />
                <span asp-validation-for="PickupStreetName" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td>City</td>
            <td>State</td>
            <td>Zipcode</td>
        </tr>
        <tr>
            <td>
                <input asp-for="PickupCity" class="form-control" />
                <span asp-validation-for="PickupCity" class="text-danger"></span>
            </td>
            <td>
                <input asp-for="PickupState" class="form-control" />
                <span asp-validation-for="PickupState" class="text-danger"></span>
            </td>
            <td>
                <input asp-for="PickupZipcode" class="form-control"  />
                <span asp-validation-for="PickupZipcode" class="text-danger"></span>

            </td>
        </tr>
        <tr>
            <td>Instructions</td>
        </tr>
        <tr>
            <td colspan="3">
                <input asp-for="PickupInstructions" class="form-control" />
                <span asp-validation-for="PickupInstructions" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <th><h3>Dropoff</h3></th>
            <td>
                @Html.DropDownList("AddressList", null, new { @id = "dropOffAddressList", onchange = "FillFields(2)" })
            </td>
        </tr>
        <tr>
            <td>Street Number</td>
            <td colspan="2">Street Name</td>
        </tr>
        <tr>
            <td>
                <input asp-for="DropoffStreetNumber" class="form-control" />
                <span asp-validation-for="DropoffStreetNumber" class="text-danger"></span>
            </td>
            <td colspan="2">
                <input asp-for="DropoffStreetName" class="form-control" />
                <span asp-validation-for="DropoffStreetName" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td>City</td>
            <td>State</td>
            <td>Zipcode</td>
        </tr>
        <tr>
            <td>
                <input asp-for="DropoffCity" class="form-control" />
                <span asp-validation-for="DropoffCity" class="text-danger"></span>
            </td>
            <td>
                <input asp-for="DropoffState" class="form-control" />
                <span asp-validation-for="DropoffState" class="text-danger"></span>
            </td>
            <td>
                <input asp-for="DropoffZipcode" class="form-control" />
                <span asp-validation-for="DropoffZipcode" class="text-danger"></span>
            </td>
        </tr>
        <tr>
            <td>Instructions</td>
        </tr>
        <tr>
            <td colspan="3">
                <input asp-for="DropoffInstructions" class="form-control" />
                <span asp-validation-for="DropoffInstructions" class="text-danger"></span>
            </td>
        </tr>
        <tr><th><h3>Item</h3></th></tr>
        <tr>
            <td>Item</td>
        </tr>
        <tr>
            <td colspan="3">
                <input asp-for="Item" class="form-control" />
                <span asp-validation-for="Item" class="text-danger"></span>
            </td>
        </tr>
    </table>
    <input type="submit" value="Update">
    <div asp-validation-summary="All" class="text-danger"></div>
</form>

<script type="text/javascript">
    function FillFields(x) {
        var addresses = @Json.Serialize(ViewData["AddressArray"]);
        var test = addresses[0].id;
        if (x == 1) {
            var box = document.getElementById("pickUpAddressList");
            var selValue = parseInt(box.options[box.selectedIndex].value);

            for (var i = 0; i < addresses.length; i++) {
                if (addresses[i].id == selValue) {
                    document.getElementById("PickupStreetNumber").value = addresses[i].streetNumber;
                    document.getElementById("PickupStreetName").value = addresses[i].streetName;
                    document.getElementById("PickupCity").value = addresses[i].city;
                    document.getElementById("PickupState").value = addresses[i].state;
                    document.getElementById("PickupZipcode").value = addresses[i].zipCode;
                }
            }
        } else if (x == 2) {
            var box = document.getElementById("dropOffAddressList");
            var selValue = box.options[box.selectedIndex].value;

            for (var i = 0; i < addresses.length; i++) {
                if (addresses[i].id == selValue) {
                    document.getElementById("DropoffStreetNumber").value = addresses[i].streetNumber;
                    document.getElementById("DropoffStreetName").value = addresses[i].streetName;
                    document.getElementById("DropoffCity").value = addresses[i].city;
                    document.getElementById("DropoffState").value = addresses[i].state;
                    document.getElementById("DropoffZipcode").value = addresses[i].zipCode;
                }
            }
        }
    }
</script>